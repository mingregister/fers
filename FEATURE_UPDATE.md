# 指定文件操作功能更新

## 新增功能

项目现在支持指定文件操作，不再仅限于目录全量同步。

### 新增的功能按钮

1. **Download Specific** - 下载指定文件（支持多选）
   - 点击后会弹出远程文件列表窗口
   - 支持多选文件进行批量下载
   - 提供"Select All"和"Deselect All"快捷按钮
   - 下载后会自动刷新本地文件列表

2. **Delete Local File** - 删除本地文件
   - 选择本地文件后点击此按钮
   - 会弹出确认对话框
   - 确认后删除选中的本地文件

### 原有功能保持不变

- **Encrypt & Upload** - 加密并上传选中的文件或目录
- **Sync Download** - 全量同步下载（下载所有远程文件）
- **Sync Upload** - 全量同步上传（上传所有本地文件）

### 使用方法

#### 下载指定文件（多选支持）

1. 点击 "Download Specific" 按钮
2. 在弹出的远程文件列表窗口中：
   - 勾选要下载的文件（支持多选）
   - 使用 "Select All" 按钮全选所有文件
   - 使用 "Deselect All" 按钮取消所有选择
3. 点击 "Download Selected" 按钮
4. 选中的文件将被批量下载并解密到本地工作目录
5. 如果某个文件下载失败，会记录错误日志但继续下载其他文件

#### 删除本地文件

1. 在文件列表中选择要删除的本地文件
2. 点击 "Delete Local File" 按钮
3. 在确认对话框中点击确认
4. 文件将被删除，列表会自动刷新

### 技术实现

#### 新增的FileManager方法

- `ListRemoteFiles()` - 获取远程文件列表
- `DownloadSpecificFile(ctx, remotePath)` - 下载指定的远程文件
- `DeleteLocalFile(relativePath)` - 删除指定的本地文件

#### UI改进

- 新增远程文件选择对话框
- 改进按钮布局，增加新功能按钮
- 保持原有的文件浏览和目录导航功能

### 安全特性

- 删除操作需要用户确认
- 文件路径验证，确保不会操作工作目录外的文件
- 保持原有的加密/解密功能
- 操作日志记录

### 编译和运行

```bash
go build -o fers.exe .
./fers.exe
```

确保配置文件 `config.yaml` 存在并包含必要的配置项：

- `crypto_key`: 加密密钥
- `target_dir`: 本地工作目录
- `oss_dir`: 远程存储目录
- `log`: 日志文件路径
